<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<link rel="stylesheet" href="joint.css" />
		<script src="joint.js"></script>
		<script src="joint.shapes.devs.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

        <script>

            $(document).ready(function(){
				var x = 0;
				var y = 0;
                $("#btninsert").click(function(event){
				if (x < 1000){
					var m2 = new joint.shapes.devs.Model({
						position: { x: x + 40, y: y + 20 },
						size: { width: 45, height: 45 },
						inPorts: ['in1','in2'],
						outPorts: ['out'],
						attrs: {
							'.label': { text: 'Model', 'ref-x': .4, 'ref-y': .2 },
							rect: { fill: '#2ECC71' },
							'.inPorts circle': { fill: '#16A085' },
							'.outPorts circle': { fill: '#E74C3C' }
						}
					});
					x += 150;
				}
				else{
					y += 100;
					x = 0;
					var m2 = new joint.shapes.devs.Model({
						position: { x: x + 40, y: y + 20 },
						size: { width: 45, height: 45 },
						inPorts: ['in1','in2'],
						outPorts: ['out'],
						attrs: {
							'.label': { text: 'Model', 'ref-x': .4, 'ref-y': .2 },
							rect: { fill: '#2ECC71' },
							'.inPorts circle': { fill: '#16A085' },
							'.outPorts circle': { fill: '#E74C3C' }
						}
					});
					x += 150;
				}
                    graph.addCell(m2);

                    //$("#items").append('<div><input type="text" name="input[]"><button  class="delete">Delete</button></div>');

                });

            });

        </script>
    </head>

	<body>
		<div id="paper-create"></div>

        <input type="submit" id="btninsert" name="btninsert" value="Clique" />

		<script type="text/javascript">
            var graph = new joint.dia.Graph;

            graph.on('all', function(eventName, cell) {
			
			var n = eventName.indexOf("change");
			if(n == -1){
					
					console.log(arguments);
					var n2 = eventName.indexOf("batch");
					
					if(eventName != "sort" && n2 == -1){
							$("#items").append(eventName + " - ");
							if(arguments[1] != null)
								$("#items").append(arguments[1].id + "</br>");
					}
					else	
						$("#items").append(eventName + "</br>");
				}

            });

			var paper = new joint.dia.Paper({ el: $('#paper-create'), width: 1100, height: 500, gridSize: 1, model: graph });

		</script>

    <div id="items"></div>
    </body>
</html>